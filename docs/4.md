[back to index](/README.md) | [prev](/docs/3.md) | [next](/docs/5.md)

# Step 4 - Connecting Express to MongoDB

In step 2,youcreated a paired-down server.js file with everythingyouneeded to start the Express server and display a page.

Next,youneed to install the Mongoose package:

```
 npm i mongoose
```

Nowyouneed to go back to server.js and write the code that will allow Express and Mongoose to talk to the Mongo database. Here’s the complete server.js script. We’ve marked the new lines.

```js
// server.js

// Use Node's require method to import the Express package
const express = require('express');
// Require Mongoose
const mongoose = require('mongoose'); // <- THIS IS NEW

// Instantiate an instance of Express
const app = express();

// Create a route that handles a request for the homepage. The callback isthehandler.youpass in the HTTP request and response objects and use Express's send() method to send a line of text back to the browser.
app.get('/', function (req, res) {
   res.send('Welcome to the homepage.');
});

// START OF NEW STUFF

// "first-mern" is the name we're givingthedb. It will be created whenyouconnect to it, if it doesn't already exist.
const mongo_uri = 'mongodb://localhost/first-mern';

// Mongoose's connect() method takes three arguments:thedb's URI, some connection options, and a callback. We've added some connection options. Don't worry about them for now. The callback will catch any connection errors or log a success message.
mongoose.connect(mongo_uri, {useNewUrlParser: true, useUnifiedTopology: true}, function (err) {
   if (err) {
       throw err;
   } else {
       console.log(`Successfully connected to ${mongo_uri}`);
   }
});

// END OF NEW STUFF

// Tell Express to listen to port 8080
app.listen(process.env.PORT || 8080);
```

Now stop the Express server and restart it. In the shell running your server, you should see a message that reads:

```
Successfully connected to mongodb://localhost/first-mern
```

Note that when you passed the URI ending in "first-mern" into connect(), Mongoose recognized that there was no database by that name and created it for you.
